import requests
import urllib
from pprint import pprint

simple_auth_url = 'https://auth.tdameritrade.com/auth?response_type=code&redirect_uri=https%3A%2F%2F127.0.0.1&client_id=KSKKUJDCX6QTDOYARPMBTVBL0WNWSLX0%40AMER.OAUTHAP'

client_id = 'KSKKUJDCX6QTDOYARPMBTVBL0WNWSLX0'
token_url = 'https://api.tdameritrade.com/v1/oauth2/token'
auth_code = '5GWMeZmzTCToqpM6wHBRhjnRTdCRrbDd9qDcRfWqcIiGmZteR83Ao8Gq9Oi1uX0dDPiGu8asW37vq01Z3Q1UqHWZvs4N0FVp7m4hVpbK%2F5ba2uMyC3owYO%2BJOFF%2FC2qadB%2Fzfn1zQkw942UhZUMJJifDjL59o8qqWCRcwtVZNVIoQELuFXUxlzdkWZLuZNg3KMZAa080hgeHVPHD%2B7jN89fuxU1AX8qzdIQTFjTXoZx0bMwRsblpVxmHIUaG10OA7rpou2dX3dFmR05TxFI0hpHkadcVebGL0CmH8BUmkuA7PdR5bmD1gp4Nr%2F4JdRl1dfarBwCeopM43%2FvMSVbeAEQVrE7qHcShnQS7UOusxHHKzsO5WJc7ix9PgJprRnX2QulDnf8oFvlMfHjd%2F7lSTtL6EIUxAghRNMVYDvHdVVeYIkG1j33jy%2B%2BiOy2100MQuG4LYrgoVi%2FJHHvlD1bfHKC2wnEmK4r7XJ9CFF%2BXBZsq%2FINkc%2BB9ul1Mxckib6LTsoMcqsbdh0ypWjr0H6xRtB3Y1QpPctm29vZiky%2FcHsXyaHlP0FgHj0Td7jXWauYYxMxouKc0xTG9R9HoI%2BPP%2FedLzP6FJ65Wf6tGu2s88CUxMdjVp3dYaVN0hqLLigmywyNJeLVUGSJ7ydD6ZfgbZ73OxEc%2FUAccUm3AZptc9gk5QUBHO%2FnQvxwjuBGrXjmwTekDCsf0OmGKR9qO1FG0EnPCorNUWmxZ1QdYa87%2F%2Ftumo1sNELvOeAMgN6t98pWJUvJMkYq15GERHVLcS6Fe12PVCuKFLRemKEI8TAYcTGaA9IK165WSj%2B%2BQq3v7h%2BumkA7nExFq5D7IkUTWGHfXRxH1q9dBKYMuWcX00ONXMnYIA2wwPZ9velyYvclGPXsR4kIhOe48rXY%3D212FD3x19z9sWBHDJACbC00B75E'
code = urllib.parse.unquote(auth_code)

# code = 'PZYLu2rMjKA5qkGaLoCla0uO3ziSqusOJot9iRJ8woDiFHoZbTDiPfvWEodVcY9SOPFoDhTekyBOaozfP78DBxodRhxnvxyRXQr261W1b0b3nyPK19zLQ90jC4clUn53g3bZ2t7wUA/gY9q+g039W7nBlph761Xdlncxf+ubE5VMJWbalInOVimMhjIPw4dE5pKQAxtDyADPGuFXg7ox7YkchY0esy8I7Rtd2XBiyUdxBDoE1iAfGHdUwz5Unu8d+usX/PPW4W55b5KHGvEB8DdeWYbQwpo929dhxOMUK+lQMjy1GisfyIIUXTwdelYEqvHmHPWTG/vwJdZROue3xz1yg8UpQNtBBk9wAcUNJbxnQGJhEoBrdbYOADhq8dyOLYrdvrNS7sDGQDedalUlMJIv9EsSTV5FsvXTomyg65J3a5M2FsQmkdPkY+2100MQuG4LYrgoVi/JHHvlBm4s2mrGIgWoBqtWQcm9rb+vDeRAQ0Ed3mCri4tjNnSCGdXn5VEUWYuzp4j/4AJlieL6sp0XSxPO9ixpVMCb7dh7Ru2kuBlxbTK+c5J0AbvrGbBIjHyl2zKFddtDYHZj36IxsCYGfeJsJiUTLyDUtJdbS608vfU4w8/4i/kqA5yrvP+2CuDv8ZpUeySQ7zdTQwk09ZgKuZG619PnfxIhUkGFAFTq5FfAgnHleBqC43N+728EX36x+fJxWZIaS/xek6gOTat0/X7S82L5OuS6lXgJZhCqyZWbeDRaxoGLTT622ZzJLpoqLoVB934p7zV+ERyVcKQzrW71U1esa+jQD6COUW0yZ/WyI1uG9CFnnyvx0WJkzB91UtYYHD2UZsLYt6itWa5leBnN3EDRRz1R5zS3DX7YUwgTWTdp4UA7j0II5v9aJA1WtAxZM94=212FD3x19z9sWBHDJACbC00B75E'

headers = {'Content-Type': 'application/x-www-form-urlencoded'}
params = dict(grant_type='authorization_code',
              access_type='offline',
              code=code,
              redirect_uri='https://127.0.0.1',
              client_id=client_id)
req = requests.post(token_url, headers=headers, data=params)
content = req.json()
pprint(content)

# {'access_token': 'SK7f4qolo5PV4VbhR6FVvcWEDps32kShnHC9/p4tCx/hPIQif3WRFR7n11VUhra/oceLlzc+oB2YND48H57dHF19HEctGQfPJvos0a4YpOoQxX13JgV/qw21e4rZyChnDv2SXa4Iff6Hh9ihpTr/ywBtgEbD7cINoFAXt89bNWSXOLxmSk0YOaz0j1rT7EKHVlDZvps+UiBttDLdd8Yd/3XWW6pXsONAwPFdBdq/IadFGnGPS+laDJaWZKfMje4W7ybDcEI7ldlgE8CcE9arw+0mRTryZNMbqNuDU5qwwbhVys9b7Qldi3lEN/5Va4qy/qFMxZRciAACFw3Kgt9GDPwqQsw4pjMgdqPaxUIsBC5GFdUNv+8RKJL8IxRuVQwlIxSDaqxnslyBRWSlMCwx0jAg98K3dpV54AlSVbzvKGeDAO9c9Yq2kdLSnguKUAeMO0I4cRXOIuQdpGHP7t7TUgHhgrR1NTp53DFhApvczeZzd2A7VAKLRkF9zmpCz0SCKYPsGsPHqlyyPNwZ+yL3GVvpH691Ws5zHY8aRb+13CZ0IW9gq100MQuG4LYrgoVi/JHHvltabzsbElwNX1y5VbJwU6IAFCyTR6Vg854V/sMJhHt9IpFwr79bCvubt0fbycACVs46WFeyPemZse4lmYpU7gRj0eilIqjjBldPcl09Hfp3YI0rsEoKDoVP06VminLvI4FE9EAQUV2T7SJ3A7PkHGNkK15QrafK3BCYzHUqfkPOmbPlatY0TG9wYlrDd8yZSyaD6Sb9Ya2zXPuUmqSXLVQ41fAscA53JRFjJG+a4yittDVAk6WGfsiVAyzFNdRrnXZBIsChFGZgSReEhv8pOlTeAFfDHmZTQZn/RSnVOfX4PXj7KOAJHAWsbJmNXsjn2K10Y87M8Ve9P0zjhylQj08EC+rQxr0de9hAKrslURpyVXyGVV1gppBlXQlj5hMEpVAnxi+6GSqNbETmNhaAnuZWZynZU/zXzshES0ClnJobkoSCEtOG3fE1nm3A9orRxbuexU4/6cDeaAjRFah08nxNw6P2flFUFjLuZqlAyYm5e/ebeVsmb7t9RqFRXcz9RfmW3M7QTePO2golQFoLOUuqUbZvBpYZNhqn2yovLtJFSKOXqQ==212FD3x19z9sWBHDJACbC00B75E', 'refresh_token': 'bewZccpggHDoOPjGvuoRZTYmLByRaOxu593+BKZdEucTjB/NrcblAkejTxQxjYkSdieh2xz8fuWL59dU30qtDvWNDmiMTvTnhkX9GRaV29RFkZSfuNW8qLUb5BeexSYltqu1PelFJOR2rnaO3h4UIAttkcQr8IOKAmiNKlth7ITFu0i0/uFowjzS2lcDIzctwSNhJsvQ+FFPniEgvlt41sDJM7Ep34vVs2Yjzx5VsQNhvbkaYpZBS9QrFsszf6GtdYNBKfg7dq2YDnmGuhn44shvp8/KWXNbNOdAYVRx0xnIj2hXc1Ge1PGt4CsWEpeA6XcTm1wgCkGVuy9BG4xKBhom2Ao9T4eIeJ447e4GyHNVJjaOeu5p+y+MD+5aX1VJKYLFNzXtokR7GTS89dWo6mTdw82PlrH1EjM8BT3HsVyjiTu0z2daQmY3iK7100MQuG4LYrgoVi/JHHvloFr/N5sQI2XLrSyYLo6dKCSO4Qguo0YxARIipM4Ad2qSIvqMP5hdc+V5lpqMocGJdu9U2EmtM5GYT2y2ETp4VkvXHcmCPQZsvBk9b7ZPbnZF28GFrXu0C3Sjl3a+aFjmSOgcS8E1d88MC0gg3lZ5gaVpLmCNjUqJUrF6EEH832oi3vCU0IrMihgtwnmH93IFI6K9nPL4RkX+0ZKfF9ckZBSvcmsM5Bh2TeYxF52b8HHu60Z860gqJNwZ530j8uVB88kxhhjuQ3nIVN4KJrmB38FOBFJtIdPZI8LqtAJMXpipp0RzZ1YU2Y60HNcUzj5cCyLlPeiwVXu9Z4sO8hNubEQI8gPU7SWJ90RV4i127V2ZHeieFcKtvZpJ7sNlH2nmAhxIlT1LSgcx9cRO55To09casy2sVb0O7yaqXP/7ciKwLHJ5qEprXWqfcqw=212FD3x19z9sWBHDJACbC00B75E', 'scope': 'PlaceTrades AccountAccess MoveMoney', 'expires_in': 1800, 'refresh_token_expires_in': 7776000, 'token_type': 'Bearer'}
# access_token: 'SK7f4qolo5PV4VbhR6FVvcWEDps32kShnHC9/p4tCx/hPIQif3WRFR7n11VUhra/oceLlzc+oB2YND48H57dHF19HEctGQfPJvos0a4YpOoQxX13JgV/qw21e4rZyChnDv2SXa4Iff6Hh9ihpTr/ywBtgEbD7cINoFAXt89bNWSXOLxmSk0YOaz0j1rT7EKHVlDZvps+UiBttDLdd8Yd/3XWW6pXsONAwPFdBdq/IadFGnGPS+laDJaWZKfMje4W7ybDcEI7ldlgE8CcE9arw+0mRTryZNMbqNuDU5qwwbhVys9b7Qldi3lEN/5Va4qy/qFMxZRciAACFw3Kgt9GDPwqQsw4pjMgdqPaxUIsBC5GFdUNv+8RKJL8IxRuVQwlIxSDaqxnslyBRWSlMCwx0jAg98K3dpV54AlSVbzvKGeDAO9c9Yq2kdLSnguKUAeMO0I4cRXOIuQdpGHP7t7TUgHhgrR1NTp53DFhApvczeZzd2A7VAKLRkF9zmpCz0SCKYPsGsPHqlyyPNwZ+yL3GVvpH691Ws5zHY8aRb+13CZ0IW9gq100MQuG4LYrgoVi/JHHvltabzsbElwNX1y5VbJwU6IAFCyTR6Vg854V/sMJhHt9IpFwr79bCvubt0fbycACVs46WFeyPemZse4lmYpU7gRj0eilIqjjBldPcl09Hfp3YI0rsEoKDoVP06VminLvI4FE9EAQUV2T7SJ3A7PkHGNkK15QrafK3BCYzHUqfkPOmbPlatY0TG9wYlrDd8yZSyaD6Sb9Ya2zXPuUmqSXLVQ41fAscA53JRFjJG+a4yittDVAk6WGfsiVAyzFNdRrnXZBIsChFGZgSReEhv8pOlTeAFfDHmZTQZn/RSnVOfX4PXj7KOAJHAWsbJmNXsjn2K10Y87M8Ve9P0zjhylQj08EC+rQxr0de9hAKrslURpyVXyGVV1gppBlXQlj5hMEpVAnxi+6GSqNbETmNhaAnuZWZynZU/zXzshES0ClnJobkoSCEtOG3fE1nm3A9orRxbuexU4/6cDeaAjRFah08nxNw6P2flFUFjLuZqlAyYm5e/ebeVsmb7t9RqFRXcz9RfmW3M7QTePO2golQFoLOUuqUbZvBpYZNhqn2yovLtJFSKOXqQ==212FD3x19z9sWBHDJACbC00B75E'
refresh_token ='bewZccpggHDoOPjGvuoRZTYmLByRaOxu593+BKZdEucTjB/NrcblAkejTxQxjYkSdieh2xz8fuWL59dU30qtDvWNDmiMTvTnhkX9GRaV29RFkZSfuNW8qLUb5BeexSYltqu1PelFJOR2rnaO3h4UIAttkcQr8IOKAmiNKlth7ITFu0i0/uFowjzS2lcDIzctwSNhJsvQ+FFPniEgvlt41sDJM7Ep34vVs2Yjzx5VsQNhvbkaYpZBS9QrFsszf6GtdYNBKfg7dq2YDnmGuhn44shvp8/KWXNbNOdAYVRx0xnIj2hXc1Ge1PGt4CsWEpeA6XcTm1wgCkGVuy9BG4xKBhom2Ao9T4eIeJ447e4GyHNVJjaOeu5p+y+MD+5aX1VJKYLFNzXtokR7GTS89dWo6mTdw82PlrH1EjM8BT3HsVyjiTu0z2daQmY3iK7100MQuG4LYrgoVi/JHHvloFr/N5sQI2XLrSyYLo6dKCSO4Qguo0YxARIipM4Ad2qSIvqMP5hdc+V5lpqMocGJdu9U2EmtM5GYT2y2ETp4VkvXHcmCPQZsvBk9b7ZPbnZF28GFrXu0C3Sjl3a+aFjmSOgcS8E1d88MC0gg3lZ5gaVpLmCNjUqJUrF6EEH832oi3vCU0IrMihgtwnmH93IFI6K9nPL4RkX+0ZKfF9ckZBSvcmsM5Bh2TeYxF52b8HHu60Z860gqJNwZ530j8uVB88kxhhjuQ3nIVN4KJrmB38FOBFJtIdPZI8LqtAJMXpipp0RzZ1YU2Y60HNcUzj5cCyLlPeiwVXu9Z4sO8hNubEQI8gPU7SWJ90RV4i127V2ZHeieFcKtvZpJ7sNlH2nmAhxIlT1LSgcx9cRO55To09casy2sVb0O7yaqXP/7ciKwLHJ5qEprXWqfcqw=212FD3x19z9sWBHDJACbC00B75E'
refresh_params = dict(grant_type='refresh_token', refresh_token=refresh_token, client_id=client_id)
refresh_req = requests.post(token_url, headers=headers, data=refresh_params)
refresh_content = refresh_req.json()
pprint(refresh_content)
refresh_content['access_token']
# 'w2VsToRHP8upZ8cW+AMTY1aMtPktzPcZ2RgVp5/w2edvT7OXjc278HWQ5qtZZAUZoEAkGSW4rOfLqipX8hwAafONu7oUpNPB6AmglaSYWu+4GuYpWFjQ/8v250dnq5Zu105WBGpaFTbDIaHlOr7ANKp0CzjqY/9b+70cH8TcFqTzh2kqTBzQnjtRKbKc8qG/qeTtVD3QgL4gFrGaz6ghaEcVqDjrUreDelkF2yiwmWcib1J9Tph0xK6YElN1a29cjeTNFk5d+YQpufEOgm1zMI4mecF6/Wv/ggHziqmCijGjUrUyFIBTuNNBINwTHIl+KZ+Zm7es6G4+ZSu+ktp/5Tkv1T5hx7D1oxoer8Y0V/tpO4lQL17gPytZfSEbl4AVzxOg7fhmKrPp4mEmOYOw8GHqFbog4QZ+xT8BafNpQdQNhUM48MeL2jXL/iU0lj9i3W1sHJLUW2GIJpYG/64TwIhcMrmbE4UnsBcLHbc0orsvxYGiPu/qBnhuuviNC9vEiF90Fd81Y528E+Nt8oduk/Vw/TWmfO7hKIhtMDaC553PmvivO100MQuG4LYrgoVi/JHHvlEhcQqXvtGxzpYKO5f/wmplOiv+J1RdZX1tlAi9lTaYZF9ZvoLA2sJOGfud4cX2OaS2pd1SvzPa/gBuR6F3AQonMLqIA6dmVO657Seb+aefEcwUJVl/NjR9/5a+Msixz8tNdDWEgLXsunonVukHtwFpjQd3Zo1j77LhwK9g2RZ70XE5aoMuov8apAj63Sl3/F13Tg2Nud+HI8Ij8gfa+NokgmzFzqs71lADxKaewt2IFNr8f4S86nCn+FNfwRIR4pFeMBDZAZFqLd/KYUdKs8HwuSmFztN92R3ZQ5qhdQL8Dew39JE3ILnp/PyQwodpy04JV97k9UjdpmNIRkpDt7ML3Oc7Aw1eeIDIYSECOZG8ddcRIYHWqc4snKsqWE3gO0T2A2ckcrlEfilOMAt3cO4lSPUSHLepO7RZUUa530BykW38mpuzYJlYt3mB4QZZ/n79A+bpjvCJxYMpQ1osjv3oNvOZ8z9OKqBCKAsO+CzkU/ObgYJry2GI8sVjua3HEiumsMs4zNcTjIRHCTohtSEzvEeKiJdSDLkwhnG8oLYx8iKwNw==212FD3x19z9sWBHDJACbC00B75E'


account_id = '279025845'
